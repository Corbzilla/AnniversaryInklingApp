(function(){window.weddingAniversary={Models:{},Collections:{},Views:{},Routers:{},Util:{},init:function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o;window.custom_events=_.extend({},Backbone.Events),n=new this.Models.UserModel,i=new this.Collections.ItemsCollection,e=new this.Views.CountdownView,k=new this.Views.NavView({model:n}),j=new this.Views.MobilenavView,l=new this.Views.QuickstartView({model:n}),o=new this.Views.UserView({model:n}),g=new this.Views.IdeacolView({model:n,collection:i}),h=new this.Views.ItemcolView,b=new this.Views.AdditemView,m=new this.Views.SigninchoiceView,f=new this.Views.HelpView,d=new this.Views.ContactusView,a=new this.Views.AboutView,c=new this.Views.AppView({collection:i,model:n}),this.router=new this.Routers.MainRouter(c,o,l,f,d,a),this.loggedUser=n}},$(document).ready(function(){"use strict";return weddingAniversary.init(),Backbone.history.start({pushState:!0})})}).call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};weddingAniversary.Routers.MainRouter=function(c){function e(){return this.displayAboutUs=b(this.displayAboutUs,this),this.displayContactUs=b(this.displayContactUs,this),this.displayHelp=b(this.displayHelp,this),this.displayMainApp=b(this.displayMainApp,this),this.displayIdeasApp=b(this.displayIdeasApp,this),this.displaySignIn=b(this.displaySignIn,this),this.displayLandingPage=b(this.displayLandingPage,this),this.initialize=b(this.initialize,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.initialize=function(a,b,c,d,e,f){this.appView=a,this.userView=b,this.landingPage=c,this.helpView=d,this.contactUsView=e,this.aboutUsView=f},e.prototype.routes={"":"displayLandingPage",signin:"displaySignIn",ideas:"displayIdeasApp",main:"displayMainApp",help:"displayHelp",contact:"displayContactUs",about:"displayAboutUs"},e.prototype.displayLandingPage=function(){this.userView.hide(),this.appView.hide(),this.helpView.hide(),this.contactUsView.hide(),this.aboutUsView.hide(),this.landingPage.display()},e.prototype.displaySignIn=function(){this.helpView.hide(),this.contactUsView.hide(),this.aboutUsView.hide(),this.landingPage.hideMe(),this.appView.hide(),this.userView.displayView()},e.prototype.displayIdeasApp=function(){this.appView.isDateSet()&&(this.helpView.hide(),this.contactUsView.hide(),this.aboutUsView.hide(),this.userView.displayView(),this.appView.loadPartialApp())},e.prototype.displayMainApp=function(){this.appView.isLoggedIn()&&(this.userView.hide(),this.helpView.hide(),this.contactUsView.hide(),this.aboutUsView.hide(),this.appView.loadFullApp())},e.prototype.displayHelp=function(){this.userView.hide(),this.appView.hide(),this.landingPage.hideMe(),this.contactUsView.hide(),this.aboutUsView.hide(),this.helpView.display()},e.prototype.displayContactUs=function(){this.userView.hide(),this.appView.hide(),this.landingPage.hideMe(),this.helpView.hide(),this.aboutUsView.hide(),this.contactUsView.display()},e.prototype.displayAboutUs=function(){this.userView.hide(),this.appView.hide(),this.landingPage.hideMe(),this.helpView.hide(),this.contactUsView.hide(),this.aboutUsView.display()},e}(Backbone.Router)}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};weddingAniversary.Models.IdeaModel=function(b){function d(){return a=d.__super__.constructor.apply(this,arguments)}return c(d,b),d.prototype.defaults={ASIN:"",url:"http://amazon.com",imgUrl:"",imgHeight:"0",imgWidth:"0",itemTitle:"item title",itemFormattedPrice:"no suggested price"},d}(Backbone.Model)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};weddingAniversary.Models.ItemModel=function(c){function e(){return this.validate=b(this.validate,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.defaults={ID:"-1",access_token:"",title:"default title",description:"default body",ASIN:""},e.prototype.urlRoot="/item",e.prototype.validate=function(a){return""===a.title?"Title must be set":void 0},e}(Backbone.Model)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};weddingAniversary.Models.UserModel=function(c){function e(){return this.validate=b(this.validate,this),this.initialize=b(this.initialize,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.initialize=function(a,b){this.email=a,this.date=b},e.prototype.defaults={email:"",date:"","for":"",access_token:""},e.prototype.urlRoot="/user",e.prototype.validate=function(a){return""===a.date?"Anniversary date must be set":moment(a.date).isAfter(moment())||moment(a.date).isSame(moment(),"day")?"Anniversary date must be before todays date":""===a["for"]?"Must choose to buy for a Man, Woman or Both":void 0},e}(Backbone.Model)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};weddingAniversary.Collections.ItemsCollection=function(c){function e(){return this.initialize=b(this.initialize,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.model=weddingAniversary.Models.ItemModel,e.prototype.url="/item",e.prototype.initialize=function(){this.on("add",this.addItem)},e.prototype.addItem=function(a){var b;b=new weddingAniversary.Views.ItemView(a),$("#itemList").append(b.el)},e}(Backbone.Collection)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};weddingAniversary.Views.AboutView=function(c){function e(){return this.hide=b(this.hide,this),this.display=b(this.display,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.el=$("#aboutUs"),e.prototype.display=function(){this.$el.removeClass("hide"),this.$el.fadeIn(1e3)},e.prototype.hide=function(){this.$el.fadeOut(1e3)},e}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};weddingAniversary.Views.AdditemView=function(c){function e(){return this.showView=b(this.showView,this),this.initialize=b(this.initialize,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.el=$("#itemForm"),e.prototype.initialize=function(){return window.custom_events.on("setUser",this.showView)},e.prototype.showView=function(){return this.$el.removeClass("hide"),this},e}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};weddingAniversary.Views.AdminView=function(c){function e(){return this.addItem=b(this.addItem,this),this.retreiveList=b(this.retreiveList,this),this.addItems=b(this.addItems,this),this.initialize=b(this.initialize,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.el=$("#dataAdmin"),e.prototype.events={"click .btn-add":"addItem"},e.prototype.initialize=function(){return this.retreiveList(),this},e.prototype.addItems=function(a){var b,c,d,e,f;for(d="",b=e=0,f=a.length;f>e;b=++e)c=a[b],d+="<li data-val-id='"+c.ID+"'>"+c.keyword+" <span class='remove'>-</span></li>";return $("#dataList").append(d)},e.prototype.retreiveList=function(){var a;return a=[{keyword:"example"},{keyword:"another"}],this.addItems(a),this},e.prototype.addItem=function(){var a;a=this.el.find(".keyword").val(),data.keyword=a,data.ID=1,this.addItems(data)},e.prototype.removeItem=function(){var a,b;return b=this.parent(),a={keyword:b.text(),ID:b.data("id")},$(this).remove()},e}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};weddingAniversary.Views.AppView=function(c){function e(){return this.isDateSet=b(this.isDateSet,this),this.isLoggedIn=b(this.isLoggedIn,this),this.logout=b(this.logout,this),this.hide=b(this.hide,this),this.addNewItem=b(this.addNewItem,this),this.addItem=b(this.addItem,this),this.loadPartialApp=b(this.loadPartialApp,this),this.loadFullApp=b(this.loadFullApp,this),this.initialize=b(this.initialize,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.el=$("#mainApp"),e.prototype.initialize=function(){return $("#logout").on("click",this.logout),this},e.prototype.loadFullApp=function(){var a;return a=this,$("#logout").removeClass("hide"),this.collection.on("add",this.addNewItem,this),this.collection.on("reset",function(a){return console.log("items "+a)},this),this.$el.find(".col-md-12").addClass("col-md-4").removeClass("col-md-12"),this.$el.find(".col-md-4").removeClass("hide"),this.$el.removeClass("hide"),this.$el.fadeIn(1e3),this.collection.fetch({data:{access_token:this.model.get("access_token")}}),this},e.prototype.loadPartialApp=function(){return this.$el.removeClass("hide"),this.$el.fadeIn(1e3),this},e.prototype.events={"click .btn-add-item":"addItem"},e.prototype.addItem=function(){var a;return a=new weddingAniversary.Models.ItemModel({title:this.$el.find("#title").val(),description:this.$el.find("#description").val(),access_token:this.model.get("access_token")}),a.save(),this.collection.add(a),this.$el.find("#title").val(""),this.$el.find("#description").val(""),this},e.prototype.addNewItem=function(){var a;a=new weddingAniversary.Models.ItemModel({title:this.$el.find("#title").val(),description:this.$el.find("#description").val(),access_token:this.model.get("access_token")})},e.prototype.hide=function(){this.$el.fadeOut(1e3)},e.prototype.logout=function(){var a;a=this,$.ajax({type:"POST",url:"/logout",data:JSON.stringify({access_token:this.model.get("access_token")}),success:function(){a.model.set("access_token",""),$("#logout").addClass("hide"),$(".jumbotron").find("h4").empty(),$("#itemList").empty(),$("#itemForm").addClass("hide"),$("#itemCol").addClass("hide"),$("#itemCol").removeClass("col-md-4").addClass("col-md-12"),window.weddingAniversary.router.navigate("/",{trigger:!0})}})},e.prototype.isLoggedIn=function(){return this.model.get("access_token")?!0:!1},e.prototype.isDateSet=function(){return this.model.get("date")?!0:!1},e}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};weddingAniversary.Views.ContactusView=function(c){function e(){return this.submitMessage=b(this.submitMessage,this),this.display=b(this.display,this),this.hide=b(this.hide,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.el=$("#contactUs"),e.prototype.events={"click .btn-send-messge":"submitMessage"},e.prototype.hide=function(){this.$el.fadeOut(1e3)},e.prototype.display=function(){this.$el.removeClass("hide"),this.$el.fadeIn(1e3)},e.prototype.submitMessage=function(){var a,b,c,d;d=this,a=this.$el.find("#contactEmail").val(),c=this.$el.find("#contactSubject").val(),b=this.$el.find("#contactMessage").val(),$.ajax({type:"POST",url:"/message",data:JSON.stringify({email:a,subject:c,message:b}),contentType:"application/json"}).done(function(){d.$el.find("#contactEmail").val(""),d.$el.find("#contactSubject").val(""),d.$el.find("#contactMessage").val(""),alert("Message Sent!"),window.history.go(-2)})},e}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};weddingAniversary.Views.CountdownView=function(c){function e(){return this.render=b(this.render,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.initialize=function(){return window.custom_events.on("setUser",this.render),this},e.prototype.render=function(){var a,b,c,d,e,f;return e=$("#userDate").text(),e&&(d=e.split("/"),f=moment().year(),a=""+d[0]+"/"+d[1]+"/"+f,c=moment(a,"MM/DD/YYYY"),c.isBefore(moment())&&(f+=1,a=""+d[0]+"/"+d[1]+"/"+f,c=moment(a,"MM/DD/YYYY")),b=c.fromNow(),$("#countdown").text(b)),this},e}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};weddingAniversary.Views.HelpView=function(c){function e(){return this.hide=b(this.hide,this),this.display=b(this.display,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.el=$("#help"),e.prototype.display=function(){return weddingAniversary.Util.Analytics.event("User","View Help"),this.$el.removeClass("hide"),this.$el.fadeIn(1e3)},e.prototype.hide=function(){return this.$el.fadeOut(1e3)},e}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};weddingAniversary.Views.IdeaView=function(c){function e(){return this.render=b(this.render,this),this.initialize=b(this.initialize,this),this.viewItem=b(this.viewItem,this),this.addItem=b(this.addItem,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.source=$("#idea-template").html(),e.prototype.tagName="li",e.prototype.className="amazon-box grey-bg margin-b10 padding-20",e.prototype.template=Handlebars.compile(e.source),e.prototype.events={"click .add-item":"addItem","click a":"viewItem"},e.prototype.addItem=function(){var a,b;""!==window.weddingAniversary.loggedUser.get("access_token")?(b=this.model.get("url"),a=new weddingAniversary.Models.ItemModel({title:this.model.get("itemTitle"),description:"",ASIN:this.model.get("ASIN"),access_token:window.weddingAniversary.loggedUser.get("access_token")}),a.save(),this.collection.add(a)):window.location.hash="register"},e.prototype.viewItem=function(){weddingAniversary.Util.Analytics.event("User","View Amazon Item")},e.prototype.initialize=function(){return this.render(),this},e.prototype.render=function(){return this.$el.append(this.template({ASIN:this.model.get("ASIN"),url:this.model.get("url"),imgUrl:this.model.get("imgUrl"),imgHeight:this.model.get("imgHeight"),imgWidth:this.model.get("imgWidth"),itemTitle:this.model.get("itemTitle"),itemFormattedPrice:this.model.get("itemFormattedPrice")})),this},e}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};weddingAniversary.Views.IdeacolView=function(c){function e(){return this.getIdeas=b(this.getIdeas,this),this.refreshList=b(this.refreshList,this),this.displayDate=b(this.displayDate,this),this.showView=b(this.showView,this),this.initialize=b(this.initialize,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.el=$("#ideaCol"),e.prototype.events={"click .refresh":"refreshList"},e.prototype.initialize=function(a){return this.annNum=null!=a?a:1,window.custom_events.on("setUser",this.showView),window.custom_events.on("setDate",this.showView),this},e.prototype.showView=function(){return this.displayDate(),this.getIdeas(),this.$el.removeClass("hide"),this},e.prototype.displayDate=function(){var a,b,c,d,e,f,g;return f=this.model.get("date"),d=moment(this.model.get("date")),e=f.split("/"),g=moment().year(),a=""+e[0]+"/"+e[1]+"/"+g,b=moment(a),c=b.isBefore(moment())?d.year()-1:d.year(),this.annNum=moment().year()-c,this.$el.find(".ann-year").text(this.annNum),this},e.prototype.refreshList=function(){this.getIdeas()},e.prototype.getIdeas=function(){var a,b=this;return a=this,this.$el.find("#ideaList").html("<li><div class='load'></div></li>"),$.ajax({type:"POST",url:"/ideas",data:JSON.stringify({year:this.annNum,buyingFor:this.model.get("for")||""}),contentType:"application/json"}).done(function(c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;for(a.$el.find("#ideaList").empty(),p=c.ItemSearchResponse.Items[0].Item,q="Tool Tip!",g=s=0,t=p.length;t>s;g=++s)k=p[g],d=k.ASIN[0],k.DetailPageURL&&(r=k.DetailPageURL[0],l=k.ItemAttributes[0]||void 0,l&&(o=l.Title[0]||"",n=l.ListPrice||void 0,m=n?" suggested retail price"+n[0].FormattedPrice[0]:" no suggested price",i=k.ImageSets[0].ImageSet[0].ThumbnailImage[0].URL,h=k.ImageSets[0].ImageSet[0].ThumbnailImage[0].Height,j=k.ImageSets[0].ImageSet[0].ThumbnailImage[0].Width),f=new weddingAniversary.Models.IdeaModel({ASIN:d,url:r,itemTitle:o,itemFormattedPrice:m,imgUrl:i,imgHeight:h,imgWidth:j}),e=new weddingAniversary.Views.IdeaView({model:f,collection:b.collection}),a.$el.find("#ideaList").append(e.el))}).fail(function(){return console.log("Error: error while getting idea results")}),this},e}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};weddingAniversary.Views.ItemView=function(c){function e(){return this.searchLocal=b(this.searchLocal,this),this.searchAmazon=b(this.searchAmazon,this),this.viewItem=b(this.viewItem,this),this.initialize=b(this.initialize,this),this.render=b(this.render,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.source=$("#item-template").html(),e.prototype.tagName="li",e.prototype.template=Handlebars.compile(e.source),e.prototype.events={"click .btn-amazon":"searchAmazon","click .btn-list":"searchLocal","click a":"viewItem"},e.prototype.render=function(){return this.$el.append(this.template({title:this.model.get("title"),description:this.model.get("description")})),this},e.prototype.initialize=function(a){return this.model=null!=a?a:new weddingAniversary.Models.ItemModel,this.render(),this},e.prototype.viewItem=function(){weddingAniversary.Util.Analytics.event("User","View Amazon Item")},e.prototype.searchAmazon=function(){var a,b;b=this,a=this.model.get("ASIN")?JSON.stringify({keywords:this.model.get("ASIN")}):JSON.stringify({keywords:this.model.get("title")}),this.$el.find(".btn-amazon").addClass("disabled"),$.ajax({type:"POST",url:"/amazon",data:a,contentType:"application/json"}).done(function(a){var c,d,e,f,g,h,i,j,k,l,m,n;for(j=a.ItemSearchResponse.Items[0].Item,k="Tool Tip!",d=m=0,n=j.length;n>m;d=++m)e=j[d],e.DetailPageURL&&(l=e.DetailPageURL[0],f=e.ItemAttributes[0]||void 0,f&&(i=f.Title[0]||"",h=f.ListPrice||void 0,g=h?" suggested retail price"+h[0].FormattedPrice[0]:" no suggested price"),c="<div><span class='small-circle' rel='tooltip' data-original-title='"+k+"'>+</span><a href='"+l+"' class='amazon-result'>"+i+"</a>"+g+"</div>",b.$el.find(".amazon-results").append(c))}).always(function(){return b.$el.find(".btn-amazon").removeClass("disabled")})},e.prototype.searchLocal=function(){return alert("Coming Soon!")},e}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};weddingAniversary.Views.ItemcolView=function(c){function e(){return this.initialize=b(this.initialize,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.el=$("#itemCol"),e.prototype.initialize=function(){return this},e}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};weddingAniversary.Views.MobilenavView=function(c){function e(){return this.navigate=b(this.navigate,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.el=$("#mobileAppNav"),e.prototype.events={"change select":"navigate"},e.prototype.navigate=function(a){var b;b=$(a.currentTarget).val(),window.location.hash=b},e}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};weddingAniversary.Views.NavView=function(c){function e(){return this.displayHome=b(this.displayHome,this),this.displayAbout=b(this.displayAbout,this),this.displayContact=b(this.displayContact,this),this.displayHelp=b(this.displayHelp,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.el=$("nav"),e.prototype.events={"click .help-link":"displayHelp","click .contact-link":"displayContact","click .about-link":"displayAbout","click .home-link":"displayHome"},e.prototype.displayHelp=function(){window.weddingAniversary.router.navigate("help",{trigger:!0})},e.prototype.displayContact=function(){window.weddingAniversary.router.navigate("contact",{trigger:!0})},e.prototype.displayAbout=function(){window.weddingAniversary.router.navigate("about",{trigger:!0})},e.prototype.displayHome=function(){""===this.model.get("access_token")?window.weddingAniversary.router.navigate("",{trigger:!0}):window.weddingAniversary.router.navigate("main",{trigger:!0})},e}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};weddingAniversary.Views.QuickstartView=function(c){function e(){return this.displayErr=b(this.displayErr,this),this.setQuickStart=b(this.setQuickStart,this),this.display=b(this.display,this),this.hideMe=b(this.hideMe,this),this.initialize=b(this.initialize,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.el=$("#quickStart"),e.prototype.events={"click .btn-quick-start":"setQuickStart"},e.prototype.initialize=function(){var a=this;return $(".datepicker").datepicker({startView:2,autoclose:!0}),window.custom_events.on("setUser",function(){return a.$el.addClass("hide")}),window.custom_events.on("displaySinginchocie",this.hideMe),this.model.on("invalid",this.displayErr)},e.prototype.hideMe=function(){return this.$el.fadeOut(1e3,function(){}),this},e.prototype.display=function(){this.$el.removeClass("hide"),this.$el.fadeIn(1e3)},e.prototype.setQuickStart=function(){var a;return a="",this.model.set("date",this.$el.find("#quickDate").val()),this.$el.find(":checked").each(function(){a+=$(this).val()+" "}),this.model.set("for",a),this.model.isValid()&&this.$el.fadeOut(1e3,function(){return window.custom_events.trigger("setDate"),weddingAniversary.Util.Analytics.event("User","View Ideas"),window.weddingAniversary.router.navigate("ideas",{trigger:!0})}),this},e.prototype.displayErr=function(a,b){weddingAniversary.Util.Validation.displayErr(this,".quickstart-error",b)},e}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};weddingAniversary.Views.SigninchoiceView=function(c){function e(){return this.displayRegister=b(this.displayRegister,this),this.displaySignin=b(this.displaySignin,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.el=$("#signinChoice"),e.prototype.events={"click .link-signin":"displaySignin","click .link-register":"displayRegister"},e.prototype.displaySignin=function(){return window.weddingAniversary.router.navigate("signin",{trigger:!0}),this},e.prototype.displayRegister=function(){return window.weddingAniversary.router.navigate("signin",{trigger:!0}),this},e}(Backbone.View)}.call(this),function(){var a,b=function(a,b){return function(){return a.apply(b,arguments)}},c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};weddingAniversary.Views.UserView=function(c){function e(){return this.initialize=b(this.initialize,this),this.hide=b(this.hide,this),this.displayView=b(this.displayView,this),this.dateSet=b(this.dateSet,this),this.signinUser=b(this.signinUser,this),this.registerUser=b(this.registerUser,this),a=e.__super__.constructor.apply(this,arguments)}return d(e,c),e.prototype.el=$("#userForm"),e.prototype.events={"click .btn-set-user-register":"registerUser","click .btn-set-user-signin":"signinUser"},e.prototype.registerUser=function(){var a,b,c,d;a="",d=this,b=this.$el.find("#emailRegister").val(),c=this.$el.find("#passwordRegister").val(),this.date=this.$el.find("#date").val(),this.$el.find(":checked").each(function(){a+=$(this).val()+" "}),$.ajax({type:"POST",url:"/user",data:JSON.stringify({username:b,password:c,date:this.date,buyingFor:a}),contentType:"application/json"}).done(function(e){d.model.set({email:b}),d.model.set({password:c}),d.model.set({date:d.date}),d.model.set({"for":a}),d.model.set({access_token:e.token}),$("#userEmail").text(d.model.get("email")),$("#userDate").text(d.model.get("date")),d.$el.addClass("hide"),d.$el.fadeOut(1e3,function(){window.custom_events.trigger("setUser"),weddingAniversary.Util.Analytics.event("User","Register"),window.weddingAniversary.router.navigate("main",{trigger:!0})})}).fail(function(a){weddingAniversary.Util.Validation.displayErr(d,".register-valid",a.responseText),weddingAniversary.Util.Analytics.event("User","Registration Error")})},e.prototype.signinUser=function(){var a,b,c;c=this,a=this.$el.find("#emailSignin").val(),b=this.$el.find("#passwordSignin").val(),$.ajax({type:"POST",url:"/login",data:JSON.stringify({username:a,password:b}),contentType:"application/json"}).done(function(d){c.model.set({email:a}),c.model.set({password:b}),c.model.set({date:d.date}),c.model.set({"for":d.buyingFor}),c.model.set({access_token:d.token}),this.date=d.date,$("#userEmail").text(c.model.get("email")),$("#userDate").text(c.model.get("date")),c.$el.addClass("hide"),c.$el.fadeOut(1e3,function(){window.custom_events.trigger("setUser"),weddingAniversary.Util.Analytics.event("User","Sign In"),window.weddingAniversary.router.navigate("main",{trigger:!0})})}).fail(function(){weddingAniversary.Util.Analytics.event("User","Sign In Error"),console.log("Error Signin")})},e.prototype.dateSet=function(){var a;return this.$el.find("#date").val(this.model.get("date")),a=this.model.get("for").split(" "),this.$el.find(":checkbox").each(function(){var b,c;b=this,c=$(this).val(),$.each(a,function(d){a[d]===c&&$(b).attr("checked","checked")})}),this.$el.removeClass("hide"),this},e.prototype.displayView=function(){return this.$el.removeClass("hide"),this.$el.fadeIn(1e3),this},e.prototype.hide=function(){this.$el.fadeOut(1e3)},e.prototype.initialize=function(a){return this.user=null!=a?a:new weddingAniversary.Models.UserModel,window.custom_events.on("setDate",this.dateSet),window.custom_events.on("quickStartHidden",this.displayView),this},e}(Backbone.View)}.call(this),function(){weddingAniversary.Util.Analytics=function(){function a(){}return a.event=function(a,b){ga("send","event",a,b)},a}.call(this)}.call(this),function(){weddingAniversary.Util.Validation=function(){function a(){}return a.displayErr=function(a,b,c){return a.$el.find(b).text(c),a.$el.find(b).removeClass("hide")},a}.call(this)}.call(this);